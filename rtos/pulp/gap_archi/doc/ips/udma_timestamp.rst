Input file: fe/ips/udma/fe/ips/udma/udma_timestamp/README.md

Register map
^^^^^^^^^^^^


Overview
""""""""

.. table:: 

    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |                       Name                       |Offset|Width|                        Description                         |
    +==================================================+======+=====+============================================================+
    |:ref:`REG_CMD<udma_timestamp_REG_CMD>`            |     0|   32|Counter start/stop/reset register                           |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_SETUP_CNT<udma_timestamp_REG_SETUP_CNT>`|     4|   32|CFG register for counter if counter start is linked to GPIOs|
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_SETUP_CH0<udma_timestamp_REG_SETUP_CH0>`|     8|   32|CFG register for channel 0 (linked to GPIOs)                |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_SETUP_CH1<udma_timestamp_REG_SETUP_CH1>`|    12|   32|CFG register for channel 1 (linked to GPIOs)                |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_SETUP_CH2<udma_timestamp_REG_SETUP_CH2>`|    16|   32|CFG register for channel 2 (linked to GPIOs)                |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_SETUP_CH3<udma_timestamp_REG_SETUP_CH3>`|    20|   32|CFG register for channel 3 (linked to GPIOs)                |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_SETUP_CH4<udma_timestamp_REG_SETUP_CH4>`|    24|   32|CFG register for channel 4 (linked to GPIOs)                |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_SETUP_CH5<udma_timestamp_REG_SETUP_CH5>`|    28|   32|CFG register for channel 5 (linked to GPIOs)                |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_SETUP_CH6<udma_timestamp_REG_SETUP_CH6>`|    32|   32|CFG register for channel 6 (linked to GPIOs)                |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_SETUP_CH7<udma_timestamp_REG_SETUP_CH7>`|    36|   32|CFG register for channel 7 (linked to GPIOs)                |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_EVENT<udma_timestamp_REG_EVENT>`        |    40|   32|                                                            |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+
    |:ref:`REG_CLK_CFG<udma_timestamp_REG_CLK_CFG>`    |    44|   32|CFG register for clock prescaler and mux                    |
    +--------------------------------------------------+------+-----+------------------------------------------------------------+

.. _udma_timestamp_REG_CMD:

REG_CMD
"""""""

Counter start/stop/reset register

.. table:: 

    +-----+---+--------+---------------------------------------------+
    |Bit #|R/W|  Name  |                 Description                 |
    +=====+===+========+=============================================+
    |    0|W  |CNT_CLR |Reset the counter to 0 and starts/restarts it|
    +-----+---+--------+---------------------------------------------+
    |    1|W  |CNT_STOP|Reset the counter to 0 and stops it          |
    +-----+---+--------+---------------------------------------------+

.. _udma_timestamp_REG_SETUP_CNT:

REG_SETUP_CNT
"""""""""""""

CFG register for counter if counter start is linked to GPIOs

.. table:: 

    +-----+---+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|  Name  |                                                                                    Description                                                                                     |
    +=====+===+========+====================================================================================================================================================================================+
    |5:0  |R/W|EXT_SEL |Select the GPIO bit among the 64 available used for making the udma_timestamp_counter starting                                                                                      |
    +-----+---+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |7:6  |R/W|EXT_TYPE|Mode of interpreting the GPIO selected signal, udma_timestamp_counter starts counting (or is reset) if we are in =&gt; 0 (rising edge), 1 (falling edge), 2  (both edges), 3 (never)|
    +-----+---+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    |8    |R/W|EXT_EN  |Enable the start/reset of udma_timestamp_counter linked to GPIOs signals                                                                                                            |
    +-----+---+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _udma_timestamp_REG_SETUP_CH0:

REG_SETUP_CH0
"""""""""""""

CFG register for channel 0 (linked to GPIOs)

.. table:: 

    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|   Name   |                                                       Description                                                        |
    +=====+===+==========+==========================================================================================================================+
    |5:0  |R/W|INPUT_SEL |Select the GPIO bit among the 64 available linked to CHANNEL 0(when source 0,1,2) or SFU(0..7), SAI0(8), SAI1(9), SAI2(10)|
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |7:6  |R/W|INPUT_TYPE|Event source for CHANNEL ( GPIO rising edge), 1 (GPIO falling edge), 2  (GPIO both edges), 3 (AUX: SFU or SAI)            |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |8    |R/W|INPUT_EN  |Enable the CHANNEL requests (linked to specific GPIOs or AUX signals)                                                     |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |23:16|R/W|DEST_ID   |uDMA destination ID                                                                                                       |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+

.. _udma_timestamp_REG_SETUP_CH1:

REG_SETUP_CH1
"""""""""""""

CFG register for channel 1 (linked to GPIOs)

.. table:: 

    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|   Name   |                                                       Description                                                        |
    +=====+===+==========+==========================================================================================================================+
    |5:0  |R/W|INPUT_SEL |Select the GPIO bit among the 64 available linked to CHANNEL 0(when source 0,1,2) or SFU(0..7), SAI0(8), SAI1(9), SAI2(10)|
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |7:6  |R/W|INPUT_TYPE|Event source for CHANNEL ( GPIO rising edge), 1 (GPIO falling edge), 2  (GPIO both edges), 3 (AUX: SFU or SAI)            |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |8    |R/W|INPUT_EN  |Enable the CHANNEL requests (linked to specific GPIOs or AUX signals)                                                     |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |23:16|R/W|DEST_ID   |uDMA destination ID                                                                                                       |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+

.. _udma_timestamp_REG_SETUP_CH2:

REG_SETUP_CH2
"""""""""""""

CFG register for channel 2 (linked to GPIOs)

.. table:: 

    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|   Name   |                                                       Description                                                        |
    +=====+===+==========+==========================================================================================================================+
    |5:0  |R/W|INPUT_SEL |Select the GPIO bit among the 64 available linked to CHANNEL 0(when source 0,1,2) or SFU(0..7), SAI0(8), SAI1(9), SAI2(10)|
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |7:6  |R/W|INPUT_TYPE|Event source for CHANNEL ( GPIO rising edge), 1 (GPIO falling edge), 2  (GPIO both edges), 3 (AUX: SFU or SAI)            |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |8    |R/W|INPUT_EN  |Enable the CHANNEL requests (linked to specific GPIOs or AUX signals)                                                     |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |23:16|R/W|DEST_ID   |uDMA destination ID                                                                                                       |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+

.. _udma_timestamp_REG_SETUP_CH3:

REG_SETUP_CH3
"""""""""""""

CFG register for channel 3 (linked to GPIOs)

.. table:: 

    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|   Name   |                                                       Description                                                        |
    +=====+===+==========+==========================================================================================================================+
    |5:0  |R/W|INPUT_SEL |Select the GPIO bit among the 64 available linked to CHANNEL 0(when source 0,1,2) or SFU(0..7), SAI0(8), SAI1(9), SAI2(10)|
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |7:6  |R/W|INPUT_TYPE|Event source for CHANNEL ( GPIO rising edge), 1 (GPIO falling edge), 2  (GPIO both edges), 3 (AUX: SFU or SAI)            |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |8    |R/W|INPUT_EN  |Enable the CHANNEL requests (linked to specific GPIOs or AUX signals)                                                     |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |23:16|R/W|DEST_ID   |uDMA destination ID                                                                                                       |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+

.. _udma_timestamp_REG_SETUP_CH4:

REG_SETUP_CH4
"""""""""""""

CFG register for channel 4 (linked to GPIOs)

.. table:: 

    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|   Name   |                                                       Description                                                        |
    +=====+===+==========+==========================================================================================================================+
    |5:0  |R/W|INPUT_SEL |Select the GPIO bit among the 64 available linked to CHANNEL 0(when source 0,1,2) or SFU(0..7), SAI0(8), SAI1(9), SAI2(10)|
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |7:6  |R/W|INPUT_TYPE|Event source for CHANNEL ( GPIO rising edge), 1 (GPIO falling edge), 2  (GPIO both edges), 3 (AUX: SFU or SAI)            |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |8    |R/W|INPUT_EN  |Enable the CHANNEL requests (linked to specific GPIOs or AUX signals)                                                     |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |23:16|R/W|DEST_ID   |uDMA destination ID                                                                                                       |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+

.. _udma_timestamp_REG_SETUP_CH5:

REG_SETUP_CH5
"""""""""""""

CFG register for channel 5 (linked to GPIOs)

.. table:: 

    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|   Name   |                                                       Description                                                        |
    +=====+===+==========+==========================================================================================================================+
    |5:0  |R/W|INPUT_SEL |Select the GPIO bit among the 64 available linked to CHANNEL 0(when source 0,1,2) or SFU(0..7), SAI0(8), SAI1(9), SAI2(10)|
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |7:6  |R/W|INPUT_TYPE|Event source for CHANNEL ( GPIO rising edge), 1 (GPIO falling edge), 2  (GPIO both edges), 3 (AUX: SFU or SAI)            |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |8    |R/W|INPUT_EN  |Enable the CHANNEL requests (linked to specific GPIOs or AUX signals)                                                     |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |23:16|R/W|DEST_ID   |uDMA destination ID                                                                                                       |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+

.. _udma_timestamp_REG_SETUP_CH6:

REG_SETUP_CH6
"""""""""""""

CFG register for channel 6 (linked to GPIOs)

.. table:: 

    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|   Name   |                                                       Description                                                        |
    +=====+===+==========+==========================================================================================================================+
    |5:0  |R/W|INPUT_SEL |Select the GPIO bit among the 64 available linked to CHANNEL 0(when source 0,1,2) or SFU(0..7), SAI0(8), SAI1(9), SAI2(10)|
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |7:6  |R/W|INPUT_TYPE|Event source for CHANNEL ( GPIO rising edge), 1 (GPIO falling edge), 2  (GPIO both edges), 3 (AUX: SFU or SAI)            |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |8    |R/W|INPUT_EN  |Enable the CHANNEL requests (linked to specific GPIOs or AUX signals)                                                     |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |23:16|R/W|DEST_ID   |uDMA destination ID                                                                                                       |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+

.. _udma_timestamp_REG_SETUP_CH7:

REG_SETUP_CH7
"""""""""""""

CFG register for channel 7 (linked to GPIOs)

.. table:: 

    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |Bit #|R/W|   Name   |                                                       Description                                                        |
    +=====+===+==========+==========================================================================================================================+
    |5:0  |R/W|INPUT_SEL |Select the GPIO bit among the 64 available linked to CHANNEL 0(when source 0,1,2) or SFU(0..7), SAI0(8), SAI1(9), SAI2(10)|
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |7:6  |R/W|INPUT_TYPE|Event source for CHANNEL ( GPIO rising edge), 1 (GPIO falling edge), 2  (GPIO both edges), 3 (AUX: SFU or SAI)            |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |8    |R/W|INPUT_EN  |Enable the CHANNEL requests (linked to specific GPIOs or AUX signals)                                                     |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+
    |23:16|R/W|DEST_ID   |uDMA destination ID                                                                                                       |
    +-----+---+----------+--------------------------------------------------------------------------------------------------------------------------+

.. _udma_timestamp_REG_EVENT:

REG_EVENT
"""""""""





.. table:: 

    +-----+---+-------------+--------------------------+
    |Bit #|R/W|    Name     |       Description        |
    +=====+===+=============+==========================+
    |7:0  |R/W|DEST_ID_EVT_0|uDMA destination ID Event0|
    +-----+---+-------------+--------------------------+
    |15:8 |R/W|DEST_ID_EVT_1|uDMA destination ID Event0|
    +-----+---+-------------+--------------------------+
    |23:16|R/W|DEST_ID_EVT_2|uDMA destination ID Event0|
    +-----+---+-------------+--------------------------+
    |31:24|R/W|DEST_ID_EVT_3|uDMA destination ID Event0|
    +-----+---+-------------+--------------------------+

.. _udma_timestamp_REG_CLK_CFG:

REG_CLK_CFG
"""""""""""

CFG register for clock prescaler and mux

.. table:: 

    +-----+---+----------+-----------------------------------------------------------+
    |Bit #|R/W|   Name   |                        Description                        |
    +=====+===+==========+===========================================================+
    |1:0  |R/W|CLK_MUX   |Select clock src : 00 - PWM, 01 - GPIO, 10 - Ref clock fast|
    +-----+---+----------+-----------------------------------------------------------+
    |2    |R/W|CLK_MUX_EN|Enable the clk mux, otherwise, use internal soc clk        |
    +-----+---+----------+-----------------------------------------------------------+
    |6:4  |R/W|PWM_SEL   |Select among 8 pwm to be clock source for counter          |
    +-----+---+----------+-----------------------------------------------------------+
    |13:8 |R/W|GPIO_SEL  |Select among 64 gpio to be clock source for counter        |
    +-----+---+----------+-----------------------------------------------------------+
    |23:16|R/W|PRESCALER |Clock counter prescaler                                    |
    +-----+---+----------+-----------------------------------------------------------+
